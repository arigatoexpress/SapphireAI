import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useMemo } from 'react';
const CrowdSentimentWidget = ({ totalVotes, bullishVotes, bearishVotes, hasVoted, onVote, onAuthenticate, isAuthenticated, onReset, loading = false, }) => {
    const bullishPercentage = useMemo(() => {
        if (totalVotes === 0)
            return 0;
        return Math.round((bullishVotes / totalVotes) * 100);
    }, [totalVotes, bullishVotes]);
    const bearishPercentage = useMemo(() => {
        if (totalVotes === 0)
            return 0;
        return Math.round((bearishVotes / totalVotes) * 100);
    }, [totalVotes, bearishVotes]);
    return (_jsxs("section", { className: "relative overflow-hidden rounded-4xl border border-white/10 bg-surface-75/80 p-6 shadow-glass", children: [_jsx("div", { className: "absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(34,211,238,0.14),_transparent_70%)]" }), _jsxs("div", { className: "relative space-y-6", children: [_jsxs("div", { className: "flex items-center justify-between gap-3", children: [_jsxs("div", { children: [_jsx("p", { className: "text-xs uppercase tracking-[0.35em] text-accent-ai", children: "Crowd Signal" }), _jsx("h3", { className: "mt-2 text-2xl font-semibold text-white", children: "Community Vibe Poll" }), _jsx("p", { className: "mt-2 text-sm text-slate-300", children: "Add your take to Sapphire\u2019s open science diary. Are markets feeling bullish or bearish today?" })] }), onReset && (_jsx("button", { onClick: onReset, className: "rounded-full border border-white/15 bg-white/5 px-3 py-2 text-xs uppercase tracking-[0.3em] text-white/70 hover:bg-white/10", children: "Reset Votes" }))] }), _jsxs("div", { className: "grid gap-4 md:grid-cols-2", children: [_jsx("button", { onClick: () => (isAuthenticated ? onVote('bullish') : onAuthenticate()), disabled: loading || (!isAuthenticated && hasVoted), className: "group rounded-3xl border border-emerald-400/40 bg-emerald-500/15 px-5 py-4 text-left shadow-glass transition-transform hover:-translate-y-1 disabled:cursor-not-allowed disabled:opacity-60", children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("span", { className: "inline-flex h-10 w-10 items-center justify-center rounded-full bg-emerald-400/30 text-lg", children: "\uD83D\uDFE2" }), _jsxs("div", { children: [_jsx("h4", { className: "text-lg font-semibold text-white", children: "Bullish" }), _jsx("p", { className: "text-sm text-slate-200/80", children: "Expecting upside momentum and positive risk appetite." })] })] }) }), _jsx("button", { onClick: () => (isAuthenticated ? onVote('bearish') : onAuthenticate()), disabled: loading || (!isAuthenticated && hasVoted), className: "group rounded-3xl border border-red-400/40 bg-red-500/15 px-5 py-4 text-left shadow-glass transition-transform hover:-translate-y-1 disabled:cursor-not-allowed disabled:opacity-60", children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("span", { className: "inline-flex h-10 w-10 items-center justify-center rounded-full bg-red-400/30 text-lg", children: "\uD83D\uDD34" }), _jsxs("div", { children: [_jsx("h4", { className: "text-lg font-semibold text-white", children: "Bearish" }), _jsx("p", { className: "text-sm text-slate-200/80", children: "Expecting downside moves, risk-off posture, or hedging demand." })] })] }) })] }), _jsxs("div", { className: "rounded-3xl border border-white/10 bg-black/20 px-5 py-4", children: [_jsx("p", { className: "text-xs uppercase tracking-[0.35em] text-slate-400", children: "Community Breakdown" }), hasVoted ? (_jsxs(_Fragment, { children: [_jsxs("div", { className: "mt-3 flex flex-col gap-3 text-sm text-slate-200", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { children: "Participants" }), _jsx("span", { className: "text-white font-semibold", children: totalVotes })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "flex items-center gap-2", children: [_jsx("span", { className: "h-2 w-2 rounded-full bg-emerald-300" }), "Bullish"] }), _jsxs("span", { className: "text-white font-semibold", children: [bullishPercentage, "%"] })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "flex items-center gap-2", children: [_jsx("span", { className: "h-2 w-2 rounded-full bg-red-300" }), "Bearish"] }), _jsxs("span", { className: "text-white font-semibold", children: [bearishPercentage, "%"] })] })] }), _jsx("div", { className: "mt-4 h-2 w-full rounded-full bg-white/10", children: _jsx("div", { className: "h-full rounded-full bg-gradient-to-r from-emerald-500 to-emerald-400", style: { width: `${bullishPercentage}%` } }) })] })) : (_jsxs("div", { className: "mt-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-slate-300", children: [_jsx("p", { className: "font-medium text-white", children: "Vote to unlock community consensus." }), _jsx("p", { className: "mt-1 text-xs text-slate-300/80", children: "We protect privacy by sharing only anonymized aggregates. Cast your signal to see how the crowd is leaning." }), !isAuthenticated && (_jsx("button", { onClick: onAuthenticate, className: "mt-3 inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.28em] text-white transition hover:bg-white/20", children: "Authenticate & Vote" }))] }))] })] })] }));
};
export default CrowdSentimentWidget;
