FROM python:3.11-slim

WORKDIR /app

# Install minimal dependencies for auth check
RUN pip install aiohttp pydantic pydantic-settings cryptography redis

# Copy minimal code
COPY cloud_trader/ /app/cloud_trader/
COPY local.env .env

# Set python path
ENV PYTHONPATH=/app

# Run the standalone diagnostic script
CMD ["python", "cloud_trader/diagnostic_auth.py"]
