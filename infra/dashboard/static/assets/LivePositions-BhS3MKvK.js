import{r as m,j as e}from"./index-DpmCvXBn.js";const y={BTCUSDT:{symbol:"BTCUSDT",short:"BTC",name:"Bitcoin",gradient:"from-amber-400 via-amber-500 to-amber-600",accent:"text-amber-200"},ETHUSDT:{symbol:"ETHUSDT",short:"ETH",name:"Ethereum",gradient:"from-slate-300 via-slate-500 to-slate-700",accent:"text-slate-200"},SOLUSDT:{symbol:"SOLUSDT",short:"SOL",name:"Solana",gradient:"from-purple-500 via-emerald-400 to-sky-500",accent:"text-purple-100"},SUIUSDT:{symbol:"SUIUSDT",short:"SUI",name:"Sui",gradient:"from-sky-400 via-sky-500 to-blue-600",accent:"text-blue-100"}},x={symbol:"USDT",short:"CC",name:"Crypto Asset",gradient:"from-sapphire-500 via-sapphire-600 to-sapphire-800",accent:"text-slate-200"},g=n=>{if(!n)return x;const l=n.toUpperCase();return y[l]??{...x,symbol:l,short:l.replace("USDT","").slice(0,4)||x.short}},S=({positions:n})=>{const[l,p]=m.useState("pnl"),[c,h]=m.useState("all"),r=n.map(s=>{const t=typeof s.notional=="number"?s.notional:0,a=typeof s.size=="number"?s.size:Math.abs(t),b=s.side?String(s.side).toUpperCase():t>=0?"LONG":"SHORT";return{symbol:s.symbol??"Unknown",side:b,size:a,entry_price:typeof s.entry_price=="number"?s.entry_price:0,current_price:typeof s.current_price=="number"?s.current_price:0,pnl:typeof s.pnl=="number"?s.pnl:0,pnl_percent:typeof s.pnl_percent=="number"?s.pnl_percent:0,leverage:typeof s.leverage=="number"?s.leverage:1,model_used:s.model_used??"N/A",timestamp:s.timestamp??new Date().toISOString()}}),u=s=>s.toLowerCase()==="long"?"text-green-600":"text-red-600",i=s=>s>=0?"text-green-600":"text-red-600",d=[...r.filter(s=>c==="all"||s.model_used===c)].sort((s,t)=>{switch(l){case"pnl":return t.pnl-s.pnl;case"symbol":return s.symbol.localeCompare(t.symbol);case"size":return t.size-s.size;default:return 0}}),o=r.reduce((s,t)=>s+t.pnl,0),f=r.reduce((s,t)=>s+t.size*t.entry_price,0),j=Array.from(new Set(r.map(s=>s.model_used)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-surface-200/40 bg-surface-100/80 p-5 shadow-glass",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Positions"}),e.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:r.length}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Active exposures across all models"})]}),e.jsxs("div",{className:"rounded-2xl border border-surface-200/40 bg-surface-100/80 p-5 shadow-glass",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Total P&L"}),e.jsxs("p",{className:`mt-2 text-3xl font-semibold ${i(o)}`,children:["$",o.toFixed(2)]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Session-to-date realised + unrealised"})]}),e.jsxs("div",{className:"rounded-2xl border border-surface-200/40 bg-surface-100/80 p-5 shadow-glass",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Gross Exposure"}),e.jsxs("p",{className:"mt-2 text-3xl font-semibold text-white",children:["$",f.toFixed(2)]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Calculated at entry notional"})]})]}),e.jsx("div",{className:"rounded-2xl border border-surface-200/40 bg-surface-100/80 p-5 shadow-glass",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Sort Order"}),e.jsxs("select",{value:l,onChange:s=>p(s.target.value),className:"mt-2 rounded-xl border border-surface-200/40 bg-surface-50/40 px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500/60",children:[e.jsx("option",{value:"pnl",children:"P&L"}),e.jsx("option",{value:"symbol",children:"Symbol"}),e.jsx("option",{value:"size",children:"Size"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Model Filter"}),e.jsxs("select",{value:c,onChange:s=>h(s.target.value),className:"mt-2 rounded-xl border border-surface-200/40 bg-surface-50/40 px-3 py-2 text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-primary-500/60",children:[e.jsx("option",{value:"all",children:"All Models"}),j.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Showing ",e.jsx("span",{className:"font-semibold text-slate-200",children:d.length})," of ",r.length]})]})}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-surface-200/40 bg-surface-100/80 shadow-glass",children:[e.jsx("div",{className:"border-b border-surface-200/40 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Live Positions"})}),d.length===0?e.jsx("div",{className:"py-16 text-center text-slate-500",children:e.jsx("p",{className:"text-sm",children:"No active positions · awaiting signal fulfilment"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-surface-200/40 text-sm",children:[e.jsx("thead",{className:"bg-surface-50/40 text-xs uppercase tracking-[0.2em] text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Symbol & Model"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Side"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Size"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Entry"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Last"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"P&L"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Lev"}),e.jsx("th",{className:"px-6 py-3 text-left",children:"Updated"})]})}),e.jsx("tbody",{className:"divide-y divide-surface-200/30 text-slate-200",children:d.map((s,t)=>{const a=g(s.symbol);return e.jsxs("tr",{className:"hover:bg-surface-50/30",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-9 w-9 rounded-full bg-gradient-to-br ${a.gradient} flex items-center justify-center text-xs font-bold text-white shadow-glass`,children:a.short}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:s.symbol}),e.jsxs("p",{className:"text-xs text-slate-500",children:[a.name," · ",s.model_used]})]})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${u(s.side)} bg-white/10`,children:s.side.toUpperCase()})}),e.jsx("td",{className:"px-6 py-3 text-slate-200",children:s.size.toFixed(4)}),e.jsxs("td",{className:"px-6 py-3 text-slate-200",children:["$",s.entry_price.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-3 text-slate-200",children:["$",s.current_price.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-3",children:[e.jsxs("div",{className:`font-semibold ${i(s.pnl)}`,children:["$",s.pnl.toFixed(2)]}),e.jsxs("div",{className:`text-xs ${i(s.pnl_percent)}`,children:["(",s.pnl_percent>=0?"+":"",s.pnl_percent.toFixed(2),"%)"]})]}),e.jsxs("td",{className:"px-6 py-3 text-slate-200",children:[s.leverage,"x"]}),e.jsx("td",{className:"px-6 py-3 text-slate-500",children:new Date(s.timestamp).toLocaleTimeString()})]},t)})})]})})]})]})};export{S as default};
